# 数据库连接池

## 普通模式开发,存在的问题:

普通的JDBC数据库连接使用DriverManager来获取,每次向数据库建立连接的时候都要将Connection加载到内存中,再验证用户名和密码(得花费0.05s ~ 1s的时间)。需要数据库连接的时候,就向数据库要求一个，执行完成后再断开连接。这样的方式将会消耗大量的资源和时间。数据库的连接资源并没有得到很
好的重复利用。若同时有几百人甚至几千人在线,频繁的进行数据库连接操作将占用很多的系统资源，严重的甚至会造成服务器的崩溃。

**对于每一-次数据库连接,使用完后都得断开。**否则,如果程序出现异常而未能关闭，将会导致数据库系统中的内存泄漏，最终将导致重启数据库。( 回忆:何为Java的内存泄漏? )

**这种开发不能控制被创建的连接对象数**,系统资源会被毫无顾及的分配出去,如连接过多, 也可能导致内存泄漏,服务器崩溃。

## 数据库连接池技术

为解决传统开发中的数据库连接问题,可以采用数据库连接池技术。
**数据库连接池的基本思想**:就是为数据库连接建立一个缓冲池”。预先在缓冲池中放入-定数量的连接,当需
要建立数据库连接时,只需从”缓冲池”中取出一个,使用完毕之后再放回去。
**数据库连接池**负责分配、管理和释放数据库连接,它**允许应用程序重复使用一个现有的数据库连接,而不是重**
**新建立一 个**。
数据库连接池在初始化时将创建一 定数量的数据库连接放到连接池中,这些数据库连接的数量是由**最小数据库**
**连接数来设定**的。无论这些数据库连接是否被使用,连接池都将一 直保证至少拥有这么多的连接数量。连接池
的**最大数据库连接数量**限定了这个连接池能占有的最大连接数,当应用程序向连接池请求的连接数超过最大连
接数量时,这些请求将被加入到等待队列中。

 

## 举例

我——去——》天安门

**普通方法**

首先——》造车——》坐车去——》办事——》销毁车

下一次去继续重复操作

**连接池**

不销毁车。下次继续使用

